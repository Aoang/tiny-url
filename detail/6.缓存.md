# 缓存

缓存的机制是这个系统中最复杂的了。

冷启动，缓存需要从备份中加载数据，也就是从 MariaDB 中加载数据。

数据并不是都加载到一个里面。

比如，根据用户的数据并不需要全部加载。

用户数据可以只加载 Token 的，如果集成了更复杂的功能，比如限制数量什么的，就再加载其他的。
Token 基本上是只读的。

关于短链接，应该按照数据库设计中说的一样，加载到不同的数据库中，且那些数据库可以设置主从热备。

对于访问记录的存储，Redis 应当定时批量写入 MariaDB，然后清理掉，这种只写一次、不常读的数据存着也没用。

所有数据，都应当定时写入 MariaDB，以达到备份的作用


