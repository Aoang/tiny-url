# 生成器

其实生成器也挺简单的，一是因为系统并不复杂，二是因为已经都拆解开来了。

生成器获取请求之后，第一步会做什么？
1. 检查输入，根据 Token 规则、URL 规则进行校验，防止非法请求
2. 查询缓存服务器校验 Token
3. 查询号段池，随便挑一个或者按照规则挑一个号码
4. 向缓存服务器提交数据，如果功能就返回号段数据了


这些都是正常步骤，其实生成器内还有一个协程，它负责维护号段池
1. 生成器启动，向发号器申请号段
2. 获取到号段之后存入号段池
3. 每次号段池内被取走一个号码时，计算号段池内剩余号码
4. 如果号码少于一定数量，再向发号器申请号段并存入

号段池不应该像数组或者字典一样储存，应该只使用一个变量来储存。
增加号段、取走号段时，应当加锁。




